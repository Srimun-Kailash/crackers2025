<!DOCTYPE html>
<html>
<head>
  <title>Crackers List</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <style>
  * {
    box-sizing: border-box;
  }

  body {
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0 10px;
  }

  h2, h3 {
    text-align: center;
    color: #f1f1f1;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #222;
    margin-bottom: 20px;
    overflow-x: auto;
    display: block;
  }

  th, td {
    border: 1px solid white;
    padding: 8px;
    text-align: center;
    color: white;
    font-size: 14px;
    word-wrap: break-word;
  }

  th {
    background-color: #444;
  }

  img {
    width: 40px;
    height: 40px;
    object-fit: cover;
  }

  button {
    padding: 6px 12px;
    background-color: #1abc9c;
    border: none;
    color: white;
    font-weight: bold;
    border-radius: 4px;
    cursor: pointer;
    margin: 0 2px;
  }

  button:hover {
    background-color: #16a085;
  }

  .controls {
    text-align: center;
    margin-bottom: 30px;
  }

  @media (max-width: 768px) {
    th, td {
      font-size: 12px;
      padding: 6px;
    }

    img {
      width: 30px;
      height: 30px;
    }

    button {
      padding: 4px 8px;
      font-size: 12px;
    }

    table {
      font-size: 12px;
    }
  }

  @media (max-width: 480px) {
    h2, h3 {
      font-size: 18px;
    }

    table {
      font-size: 11px;
    }

    th, td {
      font-size: 11px;
    }
  }
</style>
</head>
<body>

  <h2>Crackers List</h2>

  <table id="itemTable">
    <thead>
      <tr>
        <th>Image</th>
        <th>Item</th>
        <th>Price</th>
        <th>Per</th>
        <th>Discounted Price (80%)</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>Total: ₹<span id="total">0.00</span></h3>
  <button onclick="generatePDF()">Download Order PDF</button>

  <script>
    const itemData = [
      { name: "Bijili", price: 10, per: "1 Box", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "2' sky shot", price: 5, per: "1 Packet", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "Flower Pot", price: 8, per: "1 Box", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "Ground Chakkar", price: 15, per: "1 Packet", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "Rocket", price: 10, per: "1 Box", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "5' sky shot", price: 5, per: "1 Packet", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "Whistling wheel", price: 8, per: "1 Box", quantity: 0, image: "images/ground chakkar.webp" },
      { name: "1000 wala", price: 15, per: "1 Piece", quantity: 0, image: "images/ground chakkar.webp" }
    ];

    function renderTable() {
      const tbody = document.querySelector("#itemTable tbody");
      tbody.innerHTML = "";

      itemData.forEach((item, index) => {
        const discounted = item.price * 0.8;
        const subtotal = discounted * item.quantity;

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><img src="${item.image}" alt="${item.name}"/></td>
          <td>${item.name}</td>
          <td>₹${item.price.toFixed(2)}</td>
          <td>${item.per}</td>
          <td>₹${discounted.toFixed(2)}</td>
          <td>
            <button onclick="changeQty(${index}, -1)">−</button>
            <span id="qty-${index}">${item.quantity}</span>
            <button onclick="changeQty(${index}, 1)">+</button>
          </td>
          <td id="subtotal-${index}">₹${subtotal.toFixed(2)}</td>
        `;
        tbody.appendChild(tr);
      });

      updateTotal();
    }

    function changeQty(index, delta) {
      itemData[index].quantity = Math.max(0, itemData[index].quantity + delta);
      const discounted = itemData[index].price * 0.8;
      const newSubtotal = discounted * itemData[index].quantity;

      document.getElementById(`qty-${index}`).innerText = itemData[index].quantity;
      document.getElementById(`subtotal-${index}`).innerText = `₹${newSubtotal.toFixed(2)}`;

      updateTotal();
    }

    function updateTotal() {
      let total = 0;
      itemData.forEach(item => {
        total += item.price * 0.8 * item.quantity;
      });
      document.getElementById("total").innerText = total.toFixed(2);
    }

    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const head = [["Item", "Price", "Per", "Discounted Price", "Quantity", "Subtotal"]];
      const body = [];

      let total = 0;

      itemData.forEach(item => {
        if (item.quantity > 0) {
          const discounted = item.price * 0.8;
          const subtotal = discounted * item.quantity;
          total += subtotal;

          body.push([
            String(item.name),
            `Rs. ${item.price.toFixed(2)}`,
            String(item.per),
            `Rs. ${discounted.toFixed(2)}`,
            String(item.quantity),
            `Rs. ${subtotal.toFixed(2)}`
          ]);
        }
      });

      doc.setFontSize(16);
      doc.text("Crackers Order Summary", 14, 20);

      doc.autoTable({
        head: head,
        body: body,
        startY: 30,
        styles: { fontSize: 11, cellPadding: 3 },
        theme: 'grid',
        headStyles: { fillColor: [41, 128, 185], textColor: 255 },
        bodyStyles: { textColor: 20 },
      });

      const finalY = doc.lastAutoTable.finalY || 30;
      doc.setFontSize(13);
      doc.text(`Total: Rs.${total.toFixed(2)}`, 14, finalY + 10);

      doc.save("cracker-order-summary.pdf");
    }

    renderTable();
  </script>

</body>
</html>


